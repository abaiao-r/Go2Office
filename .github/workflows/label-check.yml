name: PR Label Check

on:
  pull_request:
    types: [labeled, unlabeled]

permissions:
  checks: write
  pull-requests: read

jobs:
  label-check:
    name: Ready to Merge
    runs-on: ubuntu-latest

    steps:
    - name: Check for merge label
      uses: actions/github-script@v7
      with:
        script: |
          const labels = context.payload.pull_request.labels.map(l => l.name);
          const hasMergeLabel = labels.includes('ready-to-merge');
          
          if (!hasMergeLabel) {
            core.setFailed('PR must have the "ready-to-merge" label to be merged.');
          } else {
            console.log('âœ… "ready-to-merge" label is present!');
            console.log('Note: All CI checks must also pass before merging.');
          }

