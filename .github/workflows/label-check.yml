name: PR Label Check

on:
  pull_request:
    types: [labeled, unlabeled, opened, synchronize, reopened]

permissions:
  checks: write
  pull-requests: read

jobs:
  label-check:
    name: Ready to Merge
    runs-on: ubuntu-latest

    steps:
    - name: Check for merge label
      uses: actions/github-script@v7
      with:
        script: |
          const labels = context.payload.pull_request.labels.map(l => l.name);
          const hasMergeLabel = labels.includes('merge');
          
          if (!hasMergeLabel) {
            core.setFailed('PR must have the "merge" label to be merged. Add the label when you are ready to merge.');
          } else {
            console.log('âœ… "merge" label is present!');
            console.log('PR is ready to merge once all CI checks pass.');
          }

