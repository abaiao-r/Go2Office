@startuml error-handling
!theme plain
title Error Handling: Holiday API Failure

actor User
participant "Calendar\nScreen" as Screen
participant "Repository" as Repo
participant "Holiday\nAPI" as API
participant "Cache" as Cache

User -> Screen : Load holidays
Screen -> Repo : fetchHolidays()
activate Repo

Repo -> API : GET /holidays
activate API
API --> Repo : âŒ Network Error
deactivate API

Repo -> Repo : Catch exception

Repo -> Cache : Check local cache
activate Cache
Cache --> Repo : Cached data (1 day old)
deactivate Cache

alt Cache exists and valid
    Repo --> Screen : Result.success\n(from cache)
    note right: Fallback to\ncached data
else Cache invalid or missing
    Repo --> Screen : Result.failure\n(NetworkError)
    Screen --> User : Show error:\n"No internet.\nTry again later."
    Screen --> User : Offer retry button
end

deactivate Repo

@enduml

